<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="description" content="USBPcap open source USB sniffer for Windows." />
<meta name="keywords" content="USBPcap, opensource, windows, usb, sniffer" />
<title>USBPcap tour</title>
<link href="style.css" rel="stylesheet" type="text/css" />
</head>

<!-- Add jQuery library -->
<script type="text/javascript" src="js/jquery-1.9.0.min.js"></script>
<!-- Add mousewheel plugin (this is optional) -->
<script type="text/javascript" src="js/jquery.mousewheel-3.0.6.pack.js"></script>
<!-- Add fancyBox main JS and CSS files -->
<script type="text/javascript" src="js/jquery.fancybox.js?v=2.1.4"></script>
<link rel="stylesheet" type="text/css" href="js/jquery.fancybox.css?v=2.1.4" media="screen" />
<script type="text/javascript">
$(document).ready(function() {
$(".fancybox").fancybox({
        openEffect	: 'none',
        closeEffect	: 'none'
});
})
</script>
<style type="text/css">
        .fancybox-custom .fancybox-skin {
                box-shadow: 0 0 50px #222;
        }
</style>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
var pageTracker = _gat._getTracker("UA-6085094-1");
pageTracker._trackPageview();
</script>


<body>

<div id="container">

<div id="header"><h1>Open Source USB Packet capture for Windows</h1></div>

<div id="sub_header">... works on XP, Vista, 7, 8 and 10</div>

<div id="main_content_top"></div>

<div id="main_content">

<div class="content">


<h2>USB Packet capture for Windows Tour</h2>
<p>
This short tour assumes you have installed the latest version of USBPcap and Wireshark 1.10.0rc1 (or newer) and rebooted your system.
Each of the steps contains short description of what should happen and in some cases gives tips for troubleshooting.
</p>
<p>
If you feel the information provided there is not complete (it doesn't cover your case), please describe your problem on the <a href="https://groups.google.com/group/usbpcap">USBPcap mailing list</a>.
</p>

<h3>Step 1 - identify the Root Hub you want to monitor</h3>
<p>
The first step is to connect the device you want to sniff the traffic and identify the Root Hub this device is connected to. In order to do so, launch the USBPcapCMD.exe that is stored in the installation directory. You should be presented with something similiar to the picture below.
</p>
<p>
<a class="fancybox" rel="tour" href="tour/step1.png" title="USBPcapCMD.exe showing list of available devices.">
<img src="tour/step1_small.png" alt=""/>
</a>
</p>

<h4>Troubleshooting step 1</h4>
<p>
If for any reason you can't see the list of connected devices make sure you  have the USBPcap driver installed and you <strong>have restarted your computer</strong> after the installation.
</p>

<h3>Step 2 - start the capture</h3>
<p>
So now you know which of the Root Hubs available in your system you want to monitor. Please disconnect the device from your computer - this will allow USBPcap to capture the USB descriptors needed for analysis in Wireshark. Now you can run the USBPcapCMD.exe again and enter your desired output file name. (A careful reader will notice that they can skip the restart part: all that required to get the descriptors in the capture file is to reconnect your device after capture has started.).
</p>
<p>
We will be capturing the Root Hub that showed the two Hubs connected to it and an composite USB device (it is actually DigiTech RP250).
</p>
<p>
<a class="fancybox" rel="tour" href="tour/step2.png" title="USBPcapCMD.exe during capture.">
<img src="tour/step2_small.png" alt=""/>
</a>
</p>
<p>
Now it is time to use the device in order to get packets captured. In this example I have simply started the X-Edit software that controls the DigiTech RP250.
</p>

<h3>Step 3 - analyse the data</h3>
<p>
After you're done collecting data, press Ctrl+C and start Wireshark. Once started, open the pcap file you have created in Step 2. You should see the packets allongside with their description.
The sample capture is available at the Google code:
<a href="https://usbpcap.googlecode.com/files/usbpcap_sample_v2.pcap">sample_2013_04_10.pcap</a>
</p>
<p>
<a class="fancybox" rel="tour" href="tour/step3.png" title="Wireshark dissecting USBPcap trace.">
<img src="tour/step3_small.png" alt=""/>
</a>
</p>

<h3>Step 4 - live capture</h3>
<p>
If you didn't like that in steps 2 and 3 you had to finish capturing before having a chance to look at the data, you can also do a live capture.
In order to do so, you must have running the cmd.exe with elevated privileges (as Administrator). Then enter the following command:
<pre>USBPcapCMD.exe -d \\.\USBPcap2 -o - | "C:\Program Files\Wireshark\Wireshark.exe" -k -i -</pre>
This should result in live capture from standard input in Wireshark as shown below.
</p>
<p>
<a class="fancybox" rel="tour" href="tour/stdin_capture.png" title="Wireshark capturing from standard input.">
<img src="tour/stdin_capture_small.png" alt=""/>
</a>
</p>

<h3>Step 5 - Contribute to the project :-)</h3>
<p>
Once you know how to use USBPcap you might want it to work better. There are numerous ways to help, for example:
<ul>
    <li>Improving project website
    <li>Improving the documentation
    <li>Improving the filter driver
    <li>Improving the sample application
    <li>Improving installation process
    <li>Creating project artwork (icon, website banner, etc.)
    <li>Integrating the project more closely with Wireshark (dumpcap)
    <li>Donating money
</ul>
If you can help please check the menu on the right for links for github page, donation fund and contact information.
</p>

</div>

<div class="menu">

<div class="menu_title">USBPcap</div>
<ul>
<li><a href="index.html" class="menu_link">Main page</a></li>
<li><a href="tour.html" class="menu_link">Illustrated Tour</a></li>
<li><a href="captureformat.html" class="menu_link">Capture format</a></li>
<li><a href="capture_limitations.html" class="menu_link">Capture limitations</a></li>
<li><a href="donors.html" class="menu_link">Donors</a></li>
</ul>

<div class="menu_title">Develop</div>
<ul>
<li><a href="develop.html" class="menu_link">Develop</a></li>
<li><a href="block_diagram.html" class="menu_link">Block diagram</a></li>
<li><a href="capture_buffer.html" class="menu_link">Capture buffer</a></li>
<li><a href="dissectors.html" class="menu_link">Wireshark dissectors</a></li>
<li><a href="todo.html" class="menu_link">USBPcap TODO</a></li>
</ul>

<div class="menu_title">Links</div>
<ul>
<li><a href="https://github.com/desowin/usbpcap" class="menu_link">GitHub project page</a></li>
<li><a href="https://github.com/desowin/usbpcap/issues?state=open" class="menu_link">Report issue</a></li>
<li><a href="https://github.com/desowin/usbpcap/commits/master/" class="menu_link">Changelog</a></li>
<li><a href="https://github.com/desowin/usbpcap/wiki/" class="menu_link">Wiki</a></li>
</ul>


<a href="https://twitter.com/USBPcap" class="twitter-follow-button" data-show-count="false">Follow @USBPcap</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>

<script type="text/javascript" src="http://www.ohloh.net/p/634708/widgets/project_thin_badge.js"></script>

<table style="background-color: #fff; padding: 1px;" cellspacing=0>
<tr><td align=right>
  <a href="http://groups.google.com/group/usbpcap">Visit USBPcap group</a>
</td></tr>
</table>
</div>

<div id="clear"></div>

</div>

<div id="main_content_bottom">
</div>

<div id="footer"><a href="#">Back to top</a> | <a href="http://desowin.org">my homepage</a></div>

</div>

</body>

</html>
